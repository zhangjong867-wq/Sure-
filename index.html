<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–∏—Ä–æ–≤–∞—è –ù–∞—É–∫–∞ PRO: –ö–æ—Å–º–∏—á–µ—Å–∫–∞—è –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        :root { --primary: #00d2ff; --secondary: #3a7bd5; --accent: #00ffcc; --dark: #050a0f; }
        body { margin: 0; font-family: 'Segoe UI', sans-serif; background: var(--dark); color: white; overflow-x: hidden; }
        
        header { 
            padding: 20px; text-align: center; background: rgba(0,0,0,0.8); 
            border-bottom: 2px solid var(--primary); position: sticky; top: 0; z-index: 1000;
        }
        nav { display: flex; justify-content: center; gap: 10px; margin-top: 15px; flex-wrap: wrap; }
        nav button { 
            padding: 10px 20px; border: none; border-radius: 5px; background: var(--secondary); 
            color: white; font-weight: bold; cursor: pointer; transition: 0.3s;
        }
        nav button:hover { background: var(--primary); transform: scale(1.05); }

        section { display: none; padding: 40px 20px; max-width: 1200px; margin: 0 auto; animation: fadeIn 0.5s; }
        .active { display: block; }

        .cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; }
        .card { 
            background: rgba(255,255,255,0.05); padding: 20px; border-radius: 15px; 
            border: 1px solid rgba(255,255,255,0.1); transition: 0.3s;
        }
        .card:hover { transform: translateY(-5px); border-color: var(--accent); }
        .card h3 { color: var(--accent); margin: 0 0 10px 0; }
        .tag { display: inline-block; background: var(--secondary); padding: 2px 8px; border-radius: 4px; font-size: 12px; margin-bottom: 10px; }

        /* 3D Lab */
        #canvas-container { width: 100%; height: 600px; background: #000; border-radius: 15px; position: relative; cursor: crosshair; overflow: hidden; }
        .lab-ui { 
            position: absolute; top: 20px; left: 20px; z-index: 10; 
            background: rgba(0,0,0,0.85); padding: 15px; border-radius: 10px; border: 2px solid var(--primary);
        }
        .lab-ui button { display: block; width: 100%; margin: 8px 0; padding: 12px; cursor: pointer; border: none; border-radius: 4px; font-weight: bold; color: white; background: #222; transition: 0.2s; }
        .lab-ui button:hover { background: var(--primary); color: black; }
        
        .speed-gauge { 
            position: absolute; bottom: 30px; right: 30px; background: rgba(0,0,0,0.8); 
            padding: 20px; border-radius: 50%; border: 4px solid var(--accent); width: 100px; height: 100px;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            box-shadow: 0 0 20px var(--accent); pointer-events: none;
        }
        .speed-val { font-size: 24px; font-weight: 900; color: var(--accent); }
        .speed-label { font-size: 10px; text-transform: uppercase; }

        /* Test & Cert */
        .quiz-box { background: rgba(255,255,255,0.03); padding: 20px; border-radius: 10px; margin-bottom: 15px; border-left: 4px solid var(--secondary); }
        .grade-result { font-size: 80px; text-align: center; font-weight: 900; margin: 20px; text-shadow: 0 0 30px rgba(0,255,204,0.8); }
        .cert-form { text-align: center; background: #111; padding: 30px; border-radius: 20px; display: none; margin-top: 20px; border: 2px solid var(--accent); }
        input { padding: 15px; border-radius: 8px; border: 1px solid var(--primary); width: 300px; margin-bottom: 15px; background: #222; color: white; text-align: center; font-size: 18px; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

<header>
    <h1>üåç –ù–ê–£–ß–ù–´–ï –û–¢–ö–†–´–¢–ò–Ø & –ö–û–°–ú–û–° 3D</h1>
    <nav>
        <button onclick="showSection('scientists')">–≠–Ω—Ü–∏–∫–ª–æ–ø–µ–¥–∏—è</button>
        <button onclick="showSection('lab')">3D –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è</button>
        <button onclick="showSection('test')">–≠–∫–∑–∞–º–µ–Ω</button>
    </nav>
</header>

<section id="scientists" class="active">
    <div class="cards" id="scientistsGrid"></div>
</section>

<section id="lab">
    <div id="canvas-container" onmousedown="handleAction()">
        <div class="lab-ui">
            <button onclick="changeExp('gravity')">‚òÑÔ∏è –û—Ä–±–∏—Ç—ã & –ú–µ—Ç–µ–æ—Ä–∏—Ç—ã</button>
            <button onclick="changeExp('magnet')">üß≤ –ú–∞–≥–Ω–µ—Ç–∏–∑–º (–ü—Ä–∏—Ç—è–∂–µ–Ω–∏–µ)</button>
            <button onclick="changeExp('spinner')">üöÄ –¢—É—Ä–±–æ-–°–ø–∏–Ω–Ω–µ—Ä</button>
            <button onclick="changeExp('prism')">üåà –ü—Ä–∏–∑–º–∞ –ù—å—é—Ç–æ–Ω–∞</button>
            <button onclick="changeExp('atom')">‚öõÔ∏è –ê—Ç–æ–º –ë–æ—Ä–∞</button>
        </div>
        <div class="speed-gauge" id="gauge" style="display:none;">
            <div class="speed-val" id="speedText">0</div>
            <div class="speed-label">RPM</div>
        </div>
    </div>
    <div id="exp-info" style="margin-top:20px; padding: 20px; border-radius: 10px; background: rgba(0,210,255,0.1); border: 1px solid var(--primary); line-height: 1.6;"></div>
</section>

<section id="test">
    <div id="quiz-container"></div>
    <button onclick="checkQuiz()" style="width:100%; padding: 25px; background: var(--accent); color: black; font-weight: bold; border: none; cursor: pointer; font-size: 22px; border-radius: 15px;">–ó–ê–í–ï–†–®–ò–¢–¨ –¢–ï–°–¢</button>
    
    <div id="results" style="display:none;">
        <div id="gradeDisp" class="grade-result"></div>
        <div class="cert-form" id="certForm">
            <h2 style="color:var(--accent)">–°–ï–†–¢–ò–§–ò–ö–ê–¢ –ì–û–¢–û–í!</h2>
            <input type="text" id="userName" placeholder="–ò–º—è –§–∞–º–∏–ª–∏—è (–õ–∞—Ç–∏–Ω–∏—Ü–µ–π)"><br>
            <button onclick="downloadCert()" style="padding: 15px 40px; background: var(--primary); color: white; border: none; border-radius: 10px; font-weight: bold; cursor: pointer;">–°–ö–ê–ß–ê–¢–¨ PDF</button>
        </div>
    </div>
</section>

<script>
    const scientists = [
        { name: "–ò–±–Ω –°–∏–Ω–æ", cat: "–ú–µ–¥–∏—Ü–∏–Ω–∞", info: "–í–µ–ª–∏–∫–∏–π —Ü–µ–ª–∏—Ç–µ–ª—å –í–æ—Å—Ç–æ–∫–∞. –ï–≥–æ —Ç—Ä—É–¥—ã —Å—Ç–∞–ª–∏ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–æ–º –¥–ª—è –≤—Ä–∞—á–µ–π –Ω–∞ —Å–æ—Ç–Ω–∏ –ª–µ—Ç –≤–ø–µ—Ä—ë–¥." },
        { name: "–ê–±—É –†–∞–π—Ö–∞–Ω –ë–µ—Ä—É–Ω–∏", cat: "–ê—Å—Ç—Ä–æ–Ω–æ–º–∏—è", info: "–ü–µ—Ä–≤—ã–º –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏–ª –≤—Ä–∞—â–µ–Ω–∏–µ –ó–µ–º–ª–∏ –≤–æ–∫—Ä—É–≥ –°–æ–ª–Ω—Ü–∞ –∏ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç–æ–≤." },
        { name: "–ó–∞—Ö–∏—Ä–∏–¥–¥–∏–Ω –ë–∞–±—É—Ä", cat: "–≠–Ω—Ü–∏–∫–ª–æ–ø–µ–¥–∏—Å—Ç", info: "–£—á—ë–Ω—ã–π –∏ –ø—Ä–∞–≤–∏—Ç–µ–ª—å. –ï–≥–æ '–ë–∞–±—É—Ä-–Ω–∞–º–µ' —Å–æ–¥–µ—Ä–∂–∏—Ç —Ü–µ–Ω–Ω–µ–π—à–∏–µ —Å–≤–µ–¥–µ–Ω–∏—è –æ —Ñ–ª–æ—Ä–µ –∏ —Ñ–∞—É–Ω–µ." },
        { name: "–ò—Å–∞–∞–∫ –ù—å—é—Ç–æ–Ω", cat: "–§–∏–∑–∏–∫–∞", info: "–û—Ç–∫—Ä—ã–ª –∑–∞–∫–æ–Ω —Ç—è–≥–æ—Ç–µ–Ω–∏—è, –¥–æ–∫–∞–∑–∞–≤, —á—Ç–æ –Ω–µ–±–µ—Å–Ω—ã–µ —Ç–µ–ª–∞ –ø–æ–¥—á–∏–Ω—è—é—Ç—Å—è —Ç–µ–º –∂–µ –∑–∞–∫–æ–Ω–∞–º, —á—Ç–æ –∏ –∑–µ–º–Ω—ã–µ." },
        { name: "–ê–ª—å–±–µ—Ä—Ç –≠–π–Ω—à—Ç–µ–π–Ω", cat: "–§–∏–∑–∏–∫–∞", info: "–ê–≤—Ç–æ—Ä —Ç–µ–æ—Ä–∏–∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, —Å–≤—è–∑–∞–≤—à–∏–π –≤—Ä–µ–º—è, –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏ –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏—é." },
        { name: "–ù–∏–∫–æ–ª–∞ –¢–µ—Å–ª–∞", cat: "–ò–Ω–∂–µ–Ω–µ—Ä–∏—è", info: "–ì–µ–Ω–∏–π —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–∞. –ú–µ—á—Ç–∞–ª –æ –ø–µ—Ä–µ–¥–∞—á–µ —ç–Ω–µ—Ä–≥–∏–∏ –±–µ–∑ –ø—Ä–æ–≤–æ–¥–æ–≤ –ø–æ –≤—Å–µ–π –ø–ª–∞–Ω–µ—Ç–µ." },
        { name: "–ú–∞—Ä–∏—è –ö—é—Ä–∏", cat: "–•–∏–º–∏—è", info: "–ü–µ—Ä–≤–æ–æ—Ç–∫—Ä—ã–≤–∞—Ç–µ–ª—å–Ω–∏—Ü–∞ —Ä–∞–¥–∏–æ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –∂–µ–Ω—â–∏–Ω–∞ —Å –¥–≤—É–º—è –ù–æ–±–µ–ª–µ–≤—Å–∫–∏–º–∏ –ø—Ä–µ–º–∏—è–º–∏." },
        { name: "–î–º–∏—Ç—Ä–∏–π –ú–µ–Ω–¥–µ–ª–µ–µ–≤", cat: "–•–∏–º–∏—è", info: "–°–æ–∑–¥–∞–ª —Ç–∞–±–ª–∏—Ü—É —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –ø—Ä–µ–¥—Å–∫–∞–∑–∞–≤ —Å–≤–æ–π—Å—Ç–≤–∞ –µ—â—ë –Ω–µ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –≤–µ—â–µ—Å—Ç–≤." },
        { name: "–ì–∞–ª–∏–ª–µ–æ –ì–∞–ª–∏–ª–µ–π", cat: "–ê—Å—Ç—Ä–æ–Ω–æ–º–∏—è", info: "–ü–µ—Ä–≤—ã–º —É–≤–∏–¥–µ–ª –∫—Ä–∞—Ç–µ—Ä—ã –Ω–∞ –õ—É–Ω–µ –∏ —Å–ø—É—Ç–Ω–∏–∫–∏ –Æ–ø–∏—Ç–µ—Ä–∞ —á–µ—Ä–µ–∑ —Å–≤–æ–π —Ç–µ–ª–µ—Å–∫–æ–ø." },
        { name: "–ß–∞—Ä–ª—å–∑ –î–∞—Ä–≤–∏–Ω", cat: "–ë–∏–æ–ª–æ–≥–∏—è", info: "–û–±—ä—è—Å–Ω–∏–ª –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –≤–∏–¥–æ–≤ —á–µ—Ä–µ–∑ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –æ—Ç–±–æ—Ä." }
    ];

    function renderScientists() {
        const grid = document.getElementById('scientistsGrid');
        grid.innerHTML = scientists.map(s => `
            <div class="card">
                <span class="tag">${s.cat}</span>
                <h3>${s.name}</h3>
                <p>${s.info}</p>
            </div>
        `).join('');
    }

    // --- 3D ENGINE ---
    let scene, camera, renderer, currentModel, currentType = 'gravity';
    let meteors = [], magneticParticles = [];
    let rotationSpeed = 0;
    let clock = new THREE.Clock();

    function init3D() {
        const container = document.getElementById('canvas-container');
        scene = new THREE.Scene();
        camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
        renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(container.clientWidth, container.clientHeight);
        container.appendChild(renderer.domElement);

        const ambient = new THREE.AmbientLight(0xffffff, 0.6);
        const point = new THREE.PointLight(0x00d2ff, 1, 100);
        point.position.set(10, 10, 10);
        scene.add(ambient, point);
        
        camera.position.set(0, 10, 15);
        camera.lookAt(0, 0, 0);
        
        changeExp('gravity');
        animate();
    }

    function createMeteor() {
        const geo = new THREE.SphereGeometry(0.1, 8, 8);
        const mat = new THREE.MeshBasicMaterial({color: 0xffffff});
        const m = new THREE.Mesh(geo, mat);
        m.position.set(Math.random()*40-20, Math.random()*20+10, Math.random()*40-20);
        const trailGeo = new THREE.BufferGeometry();
        const trailMat = new THREE.LineBasicMaterial({color: 0x00d2ff, transparent: true, opacity: 0.5});
        meteors.push({mesh: m, velocity: new THREE.Vector3(Math.random()*0.5, -0.5 - Math.random(), 0)});
        scene.add(m);
    }

    function changeExp(type) {
        if (currentModel) scene.remove(currentModel);
        currentType = type;
        rotationSpeed = 0;
        meteors.forEach(m => scene.remove(m.mesh));
        meteors = [];
        magneticParticles.forEach(p => scene.remove(p.mesh));
        magneticParticles = [];
        
        const info = document.getElementById('exp-info');
        const gauge = document.getElementById('gauge');
        gauge.style.display = (type === 'spinner') ? 'flex' : 'none';
        
        const group = new THREE.Group();
        
        if (type === 'gravity') {
            const sun = new THREE.Mesh(new THREE.SphereGeometry(2, 32, 32), new THREE.MeshBasicMaterial({color: 0xffcc00}));
            const p = new THREE.Mesh(new THREE.SphereGeometry(0.7, 32, 32), new THREE.MeshStandardMaterial({color: 0x00aaff}));
            p.position.x = 8;
            group.add(sun, p);
            info.innerHTML = "<strong>–û–ø—ã—Ç –ù—å—é—Ç–æ–Ω–∞:</strong> –í—Ä–∞—â–µ–Ω–∏–µ –ø–ª–∞–Ω–µ—Ç –∏ –ø–∞–¥–∞—é—â–∏–µ –º–µ—Ç–µ–æ—Ä–∏—Ç—ã. –í –∫–æ—Å–º–æ—Å–µ –æ–±—ä–µ–∫—Ç—ã –¥–≤–∏–∂—É—Ç—Å—è –ø–æ–¥ –¥–µ–π—Å—Ç–≤–∏–µ–º –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏–∏.";
        } 
        else if (type === 'magnet') {
            const magnetNorth = new THREE.Mesh(new THREE.BoxGeometry(2, 4, 1), new THREE.MeshStandardMaterial({color: 0xff0000}));
            const magnetSouth = new THREE.Mesh(new THREE.BoxGeometry(2, 4, 1), new THREE.MeshStandardMaterial({color: 0x0000ff}));
            magnetNorth.position.y = 2.1;
            magnetSouth.position.y = -2.1;
            group.add(magnetNorth, magnetSouth);

            for(let i=0; i<60; i++) {
                const part = new THREE.Mesh(new THREE.SphereGeometry(0.1), new THREE.MeshBasicMaterial({color: 0x00ffcc}));
                part.position.set(Math.random()*12-6, Math.random()*12-6, Math.random()*6-3);
                magneticParticles.push({
                    mesh: part, 
                    home: part.position.clone(),
                    speed: 0.02 + Math.random()*0.05
                });
                scene.add(part);
            }
            info.innerHTML = "<strong>–ú–∞–≥–Ω–µ—Ç–∏–∑–º:</strong> –ß–∞—Å—Ç–∏—Ü—ã (—ç–ª–µ–∫—Ç—Ä–æ–Ω—ã) –ø—Ä–∏—Ç—è–≥–∏–≤–∞—é—Ç—Å—è –∫ –ø–æ–ª—é—Å–∞–º –º–∞–≥–Ω–∏—Ç–∞, –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä—É—è –Ω–µ–≤–∏–¥–∏–º—ã–µ –º–∞–≥–Ω–∏—Ç–Ω—ã–µ –ø–æ–ª—è.";
        } 
        else if (type === 'spinner') {
            const body = new THREE.Mesh(new THREE.CylinderGeometry(1, 1, 0.5, 32), new THREE.MeshStandardMaterial({color: 0x444444}));
            for(let i=0; i<3; i++) {
                const wing = new THREE.Mesh(new THREE.BoxGeometry(5, 0.2, 1.5), new THREE.MeshStandardMaterial({color: 0x00ffcc}));
                wing.rotation.y = (i * Math.PI * 2) / 3;
                group.add(wing);
            }
            group.add(body);
            info.innerHTML = "<strong>–¢—É—Ä–±–æ-–°–ø–∏–Ω–Ω–µ—Ä:</strong> –ö–ª–∏–∫–∞–π—Ç–µ –±—ã—Å—Ç—Ä–µ–µ! –ö–∞–∂–¥—ã–π –∫–ª–∏–∫ —Ä–∞–∑–≥–æ–Ω—è–µ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ.";
        }
        else if (type === 'prism') {
            const prism = new THREE.Mesh(new THREE.CylinderGeometry(1.5, 1.5, 4, 3), new THREE.MeshPhongMaterial({color: 0xffffff, transparent: true, opacity: 0.5}));
            group.add(prism);
            info.innerHTML = "<strong>–û–ø—Ç–∏–∫–∞:</strong> –†–∞–∑–ª–æ–∂–µ–Ω–∏–µ —Å–≤–µ—Ç–∞ –≤ —Ä–∞–¥—É–∂–Ω—ã–π —Å–ø–µ–∫—Ç—Ä –ø—Ä–∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–∏ —á–µ—Ä–µ–∑ —Å—Ç–µ–∫–ª—è–Ω–Ω—É—é –ø—Ä–∏–∑–º—É.";
        }
        else if (type === 'atom') {
            const core = new THREE.Mesh(new THREE.SphereGeometry(1, 32, 32), new THREE.MeshBasicMaterial({color: 0xff4444}));
            const e = new THREE.Mesh(new THREE.SphereGeometry(0.3, 32, 32), new THREE.MeshBasicMaterial({color: 0x00d2ff}));
            group.add(core, e);
            info.innerHTML = "<strong>–ú–æ–¥–µ–ª—å –ê—Ç–æ–º–∞ –ë–æ—Ä–∞:</strong> –≠–ª–µ–∫—Ç—Ä–æ–Ω—ã –≤—Ä–∞—â–∞—é—Ç—Å—è –≤–æ–∫—Ä—É–≥ —è–¥—Ä–∞ –Ω–∞ —Å—Ç—Ä–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è—Ö.";
        }

        currentModel = group;
        scene.add(currentModel);
    }

    function handleAction() {
        if (currentType === 'spinner') {
            rotationSpeed += 4.5;
            if (rotationSpeed > 60) rotationSpeed = 60;
        }
    }

    function animate() {
        requestAnimationFrame(animate);
        const delta = clock.getDelta();
        const elapsed = clock.getElapsedTime();

        // –ê–Ω–∏–º–∞—Ü–∏—è –º–µ—Ç–µ–æ—Ä–∏—Ç–æ–≤ –¥–ª—è –û—Ä–±–∏—Ç—ã
        if (currentType === 'gravity') {
            if (Math.random() < 0.05) createMeteor();
            meteors.forEach((m, idx) => {
                m.mesh.position.add(m.velocity);
                if (m.mesh.position.y < -15) {
                    scene.remove(m.mesh);
                    meteors.splice(idx, 1);
                }
            });
            const p = currentModel.children[1];
            p.position.x = Math.cos(elapsed) * 10;
            p.position.z = Math.sin(elapsed) * 10;
            p.rotation.y += 0.05;
        }

        // –ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∏—Ç—è–∂–µ–Ω–∏—è —á–∞—Å—Ç–∏—Ü –¥–ª—è –ú–∞–≥–Ω–µ—Ç–∏–∑–º–∞
        if (currentType === 'magnet') {
            magneticParticles.forEach(p => {
                const targetPos = (p.mesh.position.y > 0) ? new THREE.Vector3(0, 4, 0) : new THREE.Vector3(0, -4, 0);
                p.mesh.position.lerp(targetPos, p.speed * 0.1);
                
                // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —á–∞—Å—Ç–∏—Ü—ã –µ—Å–ª–∏ –æ–Ω–∏ "–ø—Ä–∏–ª–∏–ø–ª–∏" —Å–ª–∏—à–∫–æ–º –±–ª–∏–∑–∫–æ
                if (p.mesh.position.distanceTo(targetPos) < 0.5) {
                    p.mesh.position.set(Math.random()*12-6, Math.random()*12-6, Math.random()*6-3);
                }
            });
            currentModel.rotation.y += 0.005;
        }

        if (currentModel) {
            if (currentType === 'spinner') {
                currentModel.rotation.y += rotationSpeed * delta;
                rotationSpeed *= 0.98;
                document.getElementById('speedText').innerText = Math.floor(rotationSpeed * 50);
            } else if (currentType === 'atom') {
                const e = currentModel.children[1];
                e.position.x = Math.cos(elapsed * 4) * 5;
                e.position.z = Math.sin(elapsed * 4) * 5;
                e.position.y = Math.sin(elapsed * 2) * 2;
            } else if (currentType === 'prism') {
                currentModel.rotation.y += 0.01;
            }
        }
        
        renderer.render(scene, camera);
    }

    // --- QUIZ & CERT ---
    const quizData = [
        { q: "–ö—Ç–æ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–ª —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –º–∞—Ç–µ—Ä–∏–∫–æ–≤ –∑–∞ –æ–∫–µ–∞–Ω–æ–º –≤ XI –≤–µ–∫–µ?", a: ["–ò–±–Ω –°–∏–Ω–æ", "–ë–µ—Ä—É–Ω–∏", "–ù—å—é—Ç–æ–Ω"], c: 1 },
        { q: "–ê–≤—Ç–æ—Ä –∫–Ω–∏–≥–∏ '–ë–∞–±—É—Ä-–Ω–∞–º–µ'?", a: ["–≠–π–Ω—à—Ç–µ–π–Ω", "–ë–∞–±—É—Ä", "–ú–µ–Ω–¥–µ–ª–µ–µ–≤"], c: 1 },
        { q: "–ö–∞–∫–æ–π —É—á–µ–Ω—ã–π —Ä–∞–∑–ª–æ–∂–∏–ª –±–µ–ª—ã–π —Å–≤–µ—Ç –Ω–∞ —Å–ø–µ–∫—Ç—Ä?", a: ["–¢–µ—Å–ª–∞", "–ù—å—é—Ç–æ–Ω", "–î–∞—Ä–≤–∏–Ω"], c: 1 },
        { q: "–ê–≤—Ç–æ—Ä —Ç–µ–æ—Ä–∏–∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏?", a: ["–ì–∞–ª–∏–ª–µ–π", "–ö—é—Ä–∏", "–≠–π–Ω—à—Ç–µ–π–Ω"], c: 2 },
        { q: "–ö—Ç–æ –æ—Ç–∫—Ä—ã–ª –∑–∞–∫–æ–Ω –≤—Å–µ–º–∏—Ä–Ω–æ–≥–æ —Ç—è–≥–æ—Ç–µ–Ω–∏—è?", a: ["–ù—å—é—Ç–æ–Ω", "–ë–µ—Ä—É–Ω–∏", "–ë–∞–±—É—Ä"], c: 0 }
    ];

    function initQuiz() {
        const container = document.getElementById('quiz-container');
        container.innerHTML = quizData.map((d, i) => `
            <div class="quiz-box">
                <p><strong>${i+1}. ${d.q}</strong></p>
                ${d.a.map((ans, j) => `<label style="display:block; margin:8px 0;"><input type="radio" name="q${i}" value="${j}"> ${ans}</label>`).join('')}
            </div>
        `).join('');
    }

    let grade = "D", score = 0;
    function checkQuiz() {
        score = 0;
        quizData.forEach((d, i) => {
            const sel = document.querySelector(`input[name="q${i}"]:checked`);
            if (sel && parseInt(sel.value) === d.c) score++;
        });

        const p = (score / quizData.length) * 100;
        if (p >= 90) grade = "A";
        else if (p >= 70) grade = "B";
        else if (p >= 50) grade = "C";
        else grade = "D";

        document.getElementById('results').style.display = "block";
        const disp = document.getElementById('gradeDisp');
        disp.innerText = `GRADE: ${grade}`;
        disp.style.color = (grade === 'A' || grade === 'B') ? '#00ffcc' : '#ff4444';
        document.getElementById('certForm').style.display = "block";
        window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
    }

    function downloadCert() {
        const name = document.getElementById('userName').value.trim() || "Young Scientist";
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF('landscape');

        doc.setFillColor(10, 15, 20);
        doc.rect(0, 0, 297, 210, 'F');
        doc.setDrawColor(0, 210, 255);
        doc.setLineWidth(5);
        doc.rect(10, 10, 277, 190);

        doc.setTextColor(255, 255, 255);
        doc.setFontSize(44);
        doc.text("DIPLOMA OF EXCELLENCE", 148, 55, { align: "center" });
        
        doc.setFontSize(20);
        doc.text("This certificate confirms that the student", 148, 85, { align: "center" });

        doc.setTextColor(0, 255, 204);
        doc.setFontSize(36);
        doc.text(name.toUpperCase(), 148, 115, { align: "center" });

        doc.setTextColor(255, 255, 255);
        doc.setFontSize(18);
        doc.text("has successfully completed the World Science & 3D Lab course", 148, 145, { align: "center" });

        doc.setFontSize(34);
        doc.setTextColor(0, 210, 255);
        doc.text(`CERTIFIED GRADE: ${grade}`, 148, 180, { align: "center" });

        doc.setFontSize(12);
        doc.setTextColor(150, 150, 150);
        doc.text(`Date: ${new Date().toLocaleDateString()} | SciencePRO Global Education`, 148, 195, { align: "center" });

        doc.save(`ScienceCert_${name}.pdf`);
    }

    function showSection(id) {
        document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        if (id === 'lab' && !renderer) init3D();
    }

    window.onload = () => {
        renderScientists();
        initQuiz();
    };
</script>
</body>
</html>
